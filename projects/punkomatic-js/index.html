<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="punkomatic-js. A punk-o-matic 2 song data parser and player. iliazeus" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="alternate" type="application/atom+xml" href="https://iliazeus.lol/atom.xml">

    <link
      rel="preload" as="style"
      href="https://code.cdn.mozilla.net/fonts/fira.css"
      onload="this.onload=null;this.rel='stylesheet'"
    />

    <style>.if-not-js { display: none !important }</style>
    <noscript><style>
      .if-js { display: none !important }
      .if-not-js { display: unset !important }
    </style></noscript>

    <script src="/theme.js"></script>
    <link rel="stylesheet" href="/style.css" />

    <title>punkomatic-js | iliazeus</title>
  </head>

  <body>
    <a href="#" class="local if-js theme-toggle" style="cursor: pointer; position: absolute; right: 8px; top: 8px">toggle dark theme</a>

    <header>
      <hgroup>
        <h1><a href="/" title="go to main page">iliazeus</a></h1>
        <nav>
          <ul class="horizontal small">
            <li><a rel="me" href="https://github.com/iliazeus">github</a></li>
            <li><a rel="me" href="https://habr.com/users/iliazeus">habr</a></li>
            <li><a rel="me" href="https://lor.sh/@iliazeus">mastodon</a></li>
            <li><a rel="me" href="mailto:iliazeus@proton.me">mailto</a></li>
          </ul>
        </nav>
        <p>илья, иль не я</p>
      </hgroup>
    </header>

    <main>
      <hgroup>
        <h2>punkomatic-js</h2>
        <p>a Punk-O-Matic 2 song data parser and player</p>
        

<ul class="badges">
  
    
    <li><img
      title="Language"
      alt="TypeScript"
      src="https://img.shields.io/static/v1?style=flat-square&label=%20&message=TypeScript"
    /></li>
    
  
    
    <li><a
      target="_blank"
      href="https://github.com/iliazeus&#x2F;punkomatic-js"
    ><img
      title="Source code on GitHub"
      alt="GitHub"
      src="https://img.shields.io/static/v1?label=%20&logo=github&style=flat-square&message=GitHub"
    /></a></li>
    
  
    
    <li><a
      target="_blank"
      href="https://github.com/iliazeus&#x2F;punkomatic-js"
      ><img
      title="Project license"
      alt="MIT"
      src="https://img.shields.io/github/license/iliazeus&#x2F;punkomatic-js?style=flat-square"
    /></a></li>
    
  
</ul>

        <h3>Links</h3>
        <ul>
          
          <li><a target="_blank" href="https:&#x2F;&#x2F;github.com&#x2F;iliazeus&#x2F;punkomatic-js">Source code</a></li>
          
          
          
          <li><a target="_blank" href="https:&#x2F;&#x2F;iliazeus.github.io&#x2F;punkomatic-js&#x2F;">Online converter tool</a></li>
          
          <li><a target="_self" href="&#x2F;punkomatic&#x2F;">More songs</a></li>
          
        </ul>
      </hgroup>

      <hgroup class="punkomatic-song" id="all-i-want">
  <h3><a class="anchor" href="#all-i-want" title="link to section">#</a>The Offspring — All I Want</h3>
  
  <p><p>The classic from Crazy Taxi. Transcribed by me.</p>
</p>
  
  <div class="row">
    <button id="play" title="Play or download" disabled>Play</button>
    <button id="copy" class="if-js" title="Copy data">Copy</button>
    <pre><code>(All I Want)du-caa-gac-cac-cac-cac-bcCaa-caa-caa-caa-bcCag-gag-fcCaa-gac-cac-cac-cac-bcCaa-caa-caa-caa-bcCag-gag-fcCcF-acF-acF-acz-acz-acz-caa-caa-caa-caa-bcCag-cag-cag-ecG-adf-Z-Z-Z-Z-Z-q,-dfhfrdIeufhfrdIeufhft-bfhft-aeufhft-bfhftdIeufhfrdI-abScceu-afhfrdI-abScceF-afg-adI-abR-aeu-afg-adI-abR-aeu-afhfrdIeufhfrdIeufhft-bfhft-aeufhft-bfhftdIeufhfrdI-abScceu-afhfrdI-abScceF-afg-adI-abR-aeu-afg-adI-abR-aeu-adIeHfgeHdIeFdJ-cdq-cfhfrdI-abScceu-afhfrdI-abScceF-afg-adI-afg-aeu-afg-adI-abR-aeJbNft-Z-Z-Z-Z-Z-q,cA-aeneadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acA-abn-ada-adA-acA-abn-aeneadA-acA-abn-ada-adA-acA-abn-aeneadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acA-abn-ada-adA-acA-abn-aeneadA-acA-abn-ada-adA-acA-abn-aeneacAdjdAdjcAdhcA-ccn-cdA-acA-abn-ada-adA-acA-abn-aeneadA-acA-adA-ada-adA-acA-abn-aeuehdJ-Z-Z-Z-Z-Z-q,-bjxjiiE-akUiaiE-akUjxiy-akOhUiy-akOhUiy-akOhUiy-akUjxjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ahT-ajb-ajq-aix-ahT-ajqjbix-akUiaix-akUjxiy-akOhUiy-akOhUiE-akUiaiE-akUjxjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ahT-ajb-ajq-aix-ahT-ajqjbkOidiyidkOibkO-ckz-cjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ajq-aixhTjq-aix-ahT-ajyjjiH-Z-Z-Z-Z-Z-q</code></pre>
  </div>
  <div id="audio" class="row"></div>
</hgroup>

<style>
  .punkomatic-song .row {
    display: flex;
    flex-flow: row nowrap;
  }

  .punkomatic-song .row button {
    margin-right: 5px;
    min-width: 72px;
    max-width: 72px;
    padding: 5px;
  }

  .punkomatic-song audio {
    width: 100%;
  }
</style>

<script type="module">
  import * as pm from "/punkomatic-0.5.2.js";

  const songDiv = document.querySelector(".punkomatic-song#all-i-want");

  const playButton = songDiv.querySelector("button#play");
  const copyButton = songDiv.querySelector("button#copy");
  const codeElt = songDiv.querySelector("code");
  const audioDiv = songDiv.querySelector("#audio");

  copyButton.onclick = async () => {
    await navigator.clipboard.writeText(codeElt.innerHTML);
    copyButton.innerText = "Done!";
    setTimeout(() => (copyButton.innerText = "Copy"), 2000);
  };

  playButton.disabled = false;
  playButton.onclick = async () => {
    playButton.onclick = null;

    audioDiv.innerText = "parsing song data...";
    const song = pm.parseSong("(All I Want)du-caa-gac-cac-cac-cac-bcCaa-caa-caa-caa-bcCag-gag-fcCaa-gac-cac-cac-cac-bcCaa-caa-caa-caa-bcCag-gag-fcCcF-acF-acF-acz-acz-acz-caa-caa-caa-caa-bcCag-cag-cag-ecG-adf-Z-Z-Z-Z-Z-q,-dfhfrdIeufhfrdIeufhft-bfhft-aeufhft-bfhftdIeufhfrdI-abScceu-afhfrdI-abScceF-afg-adI-abR-aeu-afg-adI-abR-aeu-afhfrdIeufhfrdIeufhft-bfhft-aeufhft-bfhftdIeufhfrdI-abScceu-afhfrdI-abScceF-afg-adI-abR-aeu-afg-adI-abR-aeu-adIeHfgeHdIeFdJ-cdq-cfhfrdI-abScceu-afhfrdI-abScceF-afg-adI-afg-aeu-afg-adI-abR-aeJbNft-Z-Z-Z-Z-Z-q,cA-aeneadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acA-abn-ada-adA-acA-abn-aeneadA-acA-abn-ada-adA-acA-abn-aeneadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acAdadA-acA-abn-ada-adA-acA-abn-aeneadA-acA-abn-ada-adA-acA-abn-aeneacAdjdAdjcAdhcA-ccn-cdA-acA-abn-ada-adA-acA-abn-aeneadA-acA-adA-ada-adA-acA-abn-aeuehdJ-Z-Z-Z-Z-Z-q,-bjxjiiE-akUiaiE-akUjxiy-akOhUiy-akOhUiy-akOhUiy-akUjxjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ahT-ajb-ajq-aix-ahT-ajqjbix-akUiaix-akUjxiy-akOhUiy-akOhUiE-akUiaiE-akUjxjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ahT-ajb-ajq-aix-ahT-ajqjbkOidiyidkOibkO-ckz-cjq-aix-ahT-aiaixjq-aix-aia-ajyjjjq-aix-ajq-aixhTjq-aix-ahT-ajyjjiH-Z-Z-Z-Z-Z-q");

    audioDiv.innerText = "rendering song...";
    const audio = await pm.renderSong(song, {
      baseSoundPath: "/punkomatic-samples/",
      onprogress: (c, t) => {
        audioDiv.innerText = `rendering song... ${(100 * c / t).toFixed(2)}% done`;
      },
    });

    audioDiv.innerText = "encoding song..."
    const file = await pm.encodeSong(song, audio);

    const audioElt = document.createElement("audio");
    audioElt.controls = true;
    audioElt.src = URL.createObjectURL(file);
    audioDiv.replaceChildren(audioElt);

    playButton.onclick = () => audioElt.play();
  };
</script>

    </main>

    <footer>
      <nav>
        <ul class="horizontal small">
          <li><a rel="me" href="https://github.com/iliazeus">github</a></li>
          <li><a rel="me" href="https://habr.com/users/iliazeus">habr</a></li>
          <li><a rel="me" href="https://lor.sh/@iliazeus">mastodon</a></li>
          <li><a rel="me" href="mailto:iliazeus@proton.me">mailto</a></li>
          <li>made with <a href="https://www.getzola.org/">Zola</a></li>
        </ul>
      </nav>
    </footer>
  </body>
</html>
