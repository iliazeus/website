<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="iliazeus - main page" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="google-site-verification" content="T-iT_pGID-1weoNVNPdLheqjrt6tmFKIm302Cm-03Zs" />

    <link rel="alternate" type="application/atom+xml" href="{{ get_url(path="atom.xml",
    trailing_slash=false) }}">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <link
      rel="preload"
      as="style"
      href="https://code.cdn.mozilla.net/fonts/fira.css"
      onload="this.onload=null;this.rel='stylesheet'"
    />

    <!-- prettier-ignore -->
    <style>.if-not-js { display: none !important }</style>
    <noscript
      ><style>
        .if-js {
          display: none !important;
        }
        .if-not-js {
          display: unset !important;
        }
      </style></noscript
    >

    <script src="/theme.js"></script>
    <link rel="stylesheet" href="/style.css" />

    <script src="/ruffle/ruffle.js"></script>
    <script>
      // only allow up to two fetches on this page,
      // to try and sandbox the SWF
      let globalFetch = window.fetch;
      let fetchCount = 2;
      window.fetch = (...args) => {
        fetchCount -= 1;
        if (fetchCount === 0) window.fetch = null;
        return globalFetch(...args);
      };

      window.addEventListener(
        "DOMContentLoaded",
        () => {
          let container = document.getElementById("swf-container");
          container.replaceChildren();
          let ruffle = window.RufflePlayer.newest();
          let player = ruffle.createPlayer();
          container.appendChild(player);
          player.load("/punkomatic2.swf", {
            url: "/punkomatic2.swf",
            allowScriptAccess: false,
            autoplay: "off",
            unmuteOverlay: "hidden",
            wmode: "transparent",
            showSwfDownload: true,
            openUrlMode: "deny",
            allowNetworking: "none",
            allowFullscreen: true,
          });
        },
        { once: true }
      );
    </script>
    <style>
      #swf-container {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: auto;
        aspect-ratio: 4 / 3;
        padding: 0;
      }
      #swf-container > ruffle-player {
        width: 100%;
        height: auto;
        aspect-ratio: 4 / 3;
        margin: 0;
        padding: 0;
      }
    </style>

    <title>iliazeus</title>
  </head>
  <body>
    <a href="#" class="local if-js theme-toggle" style="cursor: pointer; position: absolute; right: 8px; top: 8px">toggle dark theme</a>

    <header>
      <hgroup>
        <h1><a href="/" title="go to main page">iliazeus</a></h1>
        <nav>
          <ul class="horizontal small">
            <li><a rel="me" href="https://github.com/iliazeus">github</a></li>
            <li><a rel="me" href="https://habr.com/users/iliazeus">habr</a></li>
            <li><a rel="me" href="https://lor.sh/@iliazeus">mastodon</a></li>
            <li><a rel="me" href="mailto:iliazeus@proton.me">mailto</a></li>
          </ul>
        </nav>
        <p>илья, иль не я</p>
      </hgroup>
    </header>

    <main>
      <div id="swf-container"></div>
    </main>

    <footer>
      <nav>
        <ul class="horizontal small">
          <li><a rel="me" href="https://github.com/iliazeus">github</a></li>
          <li><a rel="me" href="https://habr.com/users/iliazeus">habr</a></li>
          <li><a rel="me" href="https://lor.sh/@iliazeus">mastodon</a></li>
          <li><a rel="me" href="mailto:iliazeus@proton.me">mailto</a></li>
          <li>
            made with <a href="https://www.getzola.org/">Zola</a>
            and (my fork of) <a href="https://ruffle.rs/">Ruffle</a>
          </li>
        </ul>
      </nav>
    </footer>
  </body>
</html>
